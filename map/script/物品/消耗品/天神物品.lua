local mt = ac.skill['番天印']
mt{
--图标
art = "fantianyin.blp",
-- extr_tip = '\n|cffffff00点击对【番天印】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加智力'] = {88,880},
['技能伤害加深'] = {8.8,88},
['魔丸加成'] = {8.8,88},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加智力% 杀怪加智力
+%技能伤害加深% |cffffe799%|r 技能伤害加深
+%魔丸加成% |cffffe799%|r 魔丸加成
 ]],
}
local mt = ac.skill['战舰之舵']
mt{
--图标
art = "jianduo.blp",
-- extr_tip = '\n|cffffff00点击对【战舰之舵】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加敏捷'] = {88,880},
['移动速度'] = {5,50},
['减少周围护甲'] = {100,1000},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加敏捷% 杀怪加敏捷
+%移动速度% 移动速度
+%减少周围护甲% 减少周围护甲
 ]],
}

local mt = ac.skill['量天尺']
mt{
--图标
art = "liangtianchi.blp",
-- extr_tip = '\n|cffffff00点击对【量天尺】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加攻击'] = {88,880},
['攻击距离'] = {5,50},
['物理伤害加深'] = {15,150},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加攻击% 杀怪加攻击
+%攻击距离% 攻击距离
+%物理伤害加深% |cffffe799%|r 物理伤害加深
 ]],
}

local mt = ac.skill['虚空王座']
mt{
--图标
art = "xukongwang.blp",
-- extr_tip = '\n|cffffff00点击对【虚空王座】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加力量'] = {88,880},
['杀敌数加成'] = {8.8,88},
['暴击伤害'] = {15,150},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加力量% 杀怪加力量
+%杀敌数加成% |cffffe799%|r 杀敌数加成
+%暴击伤害% |cffffe799%|r 暴击伤害
 ]],
}

local mt = ac.skill['天眼']
mt{
--图标
art = "tianyan.blp",
-- extr_tip = '\n|cffffff00点击对【天眼】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加生命上限'] = {88,880},
['物品获取率'] = {8.8,88},
['会心伤害'] = {8.8,88},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加生命上限% 杀怪加生命上限
+%物品获取率% |cffffe799%|r 物品获取率
+%会心伤害% |cffffe799%|r 会心伤害
 ]],
}

local mt = ac.skill['血羽之心']
mt{
--图标
art = "xieyu.blp",
-- extr_tip = '\n|cffffff00点击对【血羽之心】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加敏捷'] = {88,880},
['攻击速度'] = {10,100},
['攻击减甲'] = {10,100},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加敏捷% 杀怪加敏捷
+%攻击速度% |cffffe799%|r 攻击速度
+%攻击减甲% 攻击减甲
 ]],
}

local mt = ac.skill['天神之息']
mt{
--图标
art = "tianshen.blp",
-- extr_tip = '\n|cffffff00点击对【天神之息】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加生命上限'] = {88,880},
['每秒回血'] = {1,10},
['技暴伤害'] = {8.8,88},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加生命上限% 杀怪加生命上限
+%每秒回血% |cffffe799%|r 每秒回血
+%技暴伤害% |cffffe799%|r 技暴伤害
 ]],
}

local mt = ac.skill['灭世者']
mt{
--图标
art = "mieshi.blp",
-- extr_tip = '\n|cffffff00点击对【灭世者】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加攻击'] = {88,880},
['分裂伤害'] = {5,50},
['对BOSS额外伤害'] = {2,20},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加攻击% 杀怪加攻击
+%分裂伤害% |cffffe799%|r 分裂伤害
+%对BOSS额外伤害% |cffffe799%|r 对BOSS额外伤害
 ]],
}

local mt = ac.skill['宇宙之心']
mt{
--图标
art = "yuzhou.blp",
-- extr_tip = '\n|cffffff00点击对【宇宙之心】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加智力'] = {88,880},
['全伤加深'] = {2,20},
['吸血'] = {2,20},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加智力% 杀怪加智力
+%全伤加深% |cffffe799%|r 全伤加深
+%攻击回血% 攻击回血
 ]],
}

local mt = ac.skill['太初锁灵鼓']
mt{
--图标
art = "suolinggu.blp",
-- extr_tip = '\n|cffffff00点击对【太初锁灵鼓】进行存档，存档后可在最强魔灵-成神中查看',
max_level = 10,
['杀怪加力量'] = {88,880},
['木头加成'] = {8.8,88},
['攻击%'] = {2,20},

tip = [[

|cffffe799【使用说明】：|r
|cff00ff00点击对神器进行|cffff0000存档|cff00ff00，存档后可在最强魔灵-成神中查看

|cffffe799【升级条件】：|r
|cff00ff00在|cffff0000更高难度|cff00ff00下，对该神器进行存档即可升级，最大等级受限于地图等级

|cffFFE799【神器属性】：|r
+%杀怪加力量% 杀怪加力量
+%木头加成% |cffffe799%|r 木头加成
+%攻击%% |cffffe799%|r 攻击
 ]],
}

-- 神器
local magic_item = {
    '番天印','战舰之舵','量天尺','虚空王座','天眼','血羽之心','天神之息','灭世者','宇宙之心','太初锁灵鼓'
}
ac.ts_item = magic_item
for i,value in ipairs(magic_item) do 
    local mt = ac.skill[value]
    --等久
    mt.level = 0
    --魔法书相关
    -- mt.is_order = 1 
    --物品类型
    mt.item_type = '消耗品'
    --目标类型
    mt.target_type = ac.skill.TARGET_TYPE_NONE
    mt.content_tip = ''
    mt.item_type_tip = ''
    --物品技能
    mt.is_skill = true
    --商店名词缀
    mt.store_affix = ''
    mt.specail_model = [[File00000376 - RC.mdx]]
	--忽略技能冷却
    mt.ignore_cool_save = true
    mt.passive = true
    mt.not_use_state = true --消耗品使用时不添加属性

    --使用物品
    function mt:on_cast_start()
        local hero = self.owner
        local player = self.owner:get_owner()
        local p = self.owner:get_owner()
        hero = player.hero 
       
        local key = ac.server.name2key(self.name)
        p.flag_tswp = p.flag_tswp or {} 
        if p.flag_tswp[self.name]  then 
            p:sendMsg('|cffffe799【系统消息】|r|cffff0000存档失败|r 该存档物品在本局激活一次')
            if self.add_item_count then  
                self:add_item_count(1) 
            end
            return true --不加true的话，会执行加属性。 
        end

        if ac.g_game_degree_attr <= p:Map_GetServerValue(key) then 
            p:sendMsg('|cffffe799【系统消息】|r|cffff0000存档失败|r 该存档物品已拥有，请挑战更高难度进行升级')
            if self.add_item_count then  
                self:add_item_count(1) 
            end
            return true --不加true的话，会执行加属性。 
        end
        --激活成就（存档） 
        p.flag_tswp[self.name] = true
        p:Map_AddServerValue(key,1)

        local skl = hero:find_skill(self.name,nil,true)
        if skl then 
            skl:upgrade(1)
            p:sendMsg('|cffff0000【可存档成就】'..self.name..'+1',6) 
        else
            ac.game:event_notify('技能-插入魔法书',hero,'成神',self.name)
            local skl = hero:find_skill(self.name,nil,true)
            skl.item_type = nil
            player:sendMsg('|cffFFE799【系统消息】|r|cff00ff00存档成功|r 可在最强魔灵-成神中查看',2)
            skl:set_level(1)
            -- skl:set('extr_tip','\n|cffFFE799【状态】：|r|cff00ff00已激活|r')
        end
    end
end













